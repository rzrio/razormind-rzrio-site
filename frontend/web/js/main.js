"use strict";var myPortfolio=myPortfolio||{author:"Bruno Quintela",description:"Portfolio",revision:"02072015"},API=function(a){this.System={isTouch:Modernizr.touch,supportsWEBGL:Detector.webgl&&a,init:function(){this.browser.init(),console.log(this.browser.name+"/"+this.browser.version+" isTouch:"+this.isTouch+" SupportsWebgl:"+this.supportsWEBGL)},browser:{name:null,version:null,init:function(){this.name=this.searchString(this.dataBrowser)||"Other",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"Unknown"},searchString:function(a){for(var b=0;b<a.length;b++){var c=a[b].string;if(this.versionSearchString=a[b].subString,-1!==c.indexOf(a[b].subString))return a[b].identity}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!==b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"}]},isBrowserDeprecated:function(){return"Explorer"===this.browser.name?!0:!1},useWebGL:function(){return!this.supportsWEBGL||this.isBrowserDeprecated()||this.isTouch?!1:!0}},this.World={width:window.innerWidth,height:window.innerHeight,targetRotationX:0,targetRotationY:0,dpr:window.devicePixelRatio,settings:{statsEnabled:!0,guiEnabled:!1},renderParams:{antialias:!0,alpha:!1,showStats:!0,backgroundColor:[0,0,0],backgroundImage:20,skydomeImage:6,fog:.001,enableAnaglyph:!1,focus:15,enableTrackball:!1,enableMouseListener:!1,enableGrid:!1,glitchType:2,enableGlitch:!1,enableRGBShift:!1,rgbValue:5e-4,enableFXAA:!1,enableBloom:!1,bloomStrengh:.3,enableSepia:!1,enableColorify:!0,enableFilm:!1,enableFilmBW:!0,filmStrengh:.2,enableDotFilter:!1,bleach:!0,bleachOpacity:1,technicolor:!1,enableTiltShift:!1,tiltBlur:2.5,enableVignette:!0,vignetteStrengh:5,disableEffects:!1},materialParams:{shaderAttr:"Shader Attributes",noise:.04,normalScale:.5,normalRepeat:1,useScreen:!1,useRim:!1,rimPower:3,matSelected:"Material selection",backgroundTexture:{1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22},textureMap:{1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:92,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121},eyeballMap:{1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17},normalMap:{1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20},bodyTexture:16,headTexture:97,hairTexture:1,eyeTexture:8,clothTexture:8,lipsTexture:8,lowpolyTexture:109,lowpoly2Texture:60,lowpoly3Texture:1,fragmentsTexture:1,normalSelected:"NormalMap selection",bodyNormal:12,headNormal:1,hairNormal:1,eyeNormal:1,lipsNormal:1,clothNormal:1,lowpolyNormal:1,planeNormal:1},lightsParams:{fillLightEnable:!0,fillLightIntensity:.9,fillLightCastShadow:!0,fillLightShadowIntensity:.1,keyLightEnable:!0,keyLightIntensity:2,keyLightCastShadow:!0,keyLightShadowIntensity:.1,backLightEnable:!0,backLightIntensity:.01,backLightCastShadow:!0,backLightShadowIntensity:.1,shininess:8,rotateLights:!1},motionParams:{reverseFactor:1,reverseTime:!1,autoPanX:!1,autoPanY:!1,autoPanZ:!1,autoRotationX:!1,autoRotationY:!1,autoRotationZ:!1,animateFragments:!0,rotateSceneX:function(){var a=myPortfolio.World.CurrentLayer,b=new TWEEN.Tween(a.scene.rotation).to({x:a.scene.rotation.x+90*Math.PI/180,y:a.scene.rotation.y,z:a.scene.rotation.z},1e3);b.easing(TWEEN.Easing.Quadratic.Out).start()},rotateSceneY:function(){var a=myPortfolio.World.CurrentLayer,b=new TWEEN.Tween(a.scene.rotation).to({x:a.scene.rotation.x,y:a.scene.rotation.y+90*Math.PI/180,z:a.scene.rotation.z},1e3);b.easing(TWEEN.Easing.Quadratic.Out).start()},rotateSceneZ:function(){var a=myPortfolio.World.CurrentLayer,b=new TWEEN.Tween(a.scene.rotation).to({x:a.scene.rotation.x,y:a.scene.rotation.y,z:a.scene.rotation.z+90*Math.PI/180},1e3);b.easing(TWEEN.Easing.Quadratic.Out).start()}},transitionParams:{clock:new THREE.Clock(!1),transitionMixRatio:0,texture:11,textureThreshold:.01,CurrentLayer:"A",transitionTime:1},audioParams:{playPause:function(){}},container:{},renderer:{},fpsStats:{},gpuStats:{},addGUI:function(){var a=this;if(this.settings.guiEnabled){var b=new dat.GUI;a.settings.statsEnabled&&b.add(this.renderParams,"showStats").onChange(function(a){a?(document.getElementById("stats").style.display="block",document.getElementById("gpuStats").style.display="block"):(document.getElementById("stats").style.display="none",document.getElementById("gpuStats").style.display="none")}),b.add(this.renderParams,"enableAnaglyph").onChange(function(b){b&&(myPortfolio.World.CurrentLayer.anaglyph=new THREE.AnaglyphEffect(a.renderer,a.width,a.height,2))}),b.add(this.renderParams,"focus",0,50).listen().onChange(function(){myPortfolio.World.CurrentLayer.anaglyph=new THREE.AnaglyphEffect(a.renderer,a.width,a.height,a.renderParams.focus)}),b.addColor(this.renderParams,"backgroundColor").onChange(function(b){a.renderer.setClearColor(new THREE.Color(b[0]/255,b[1]/255,b[2]/255),0)}),b.add(this.renderParams,"backgroundImage",this.materialParams.backgroundTexture).onChange(function(a){myPortfolio.World.CurrentLayer.backgroundImage.material.map=THREE.ImageUtils.loadTexture("../src/textures/background/background"+a+".jpg")}),b.add(this.renderParams,"skydomeImage",this.materialParams.backgroundTexture).onChange(function(a){myPortfolio.World.CurrentLayer.skydome.material.map=THREE.ImageUtils.loadTexture("../src/textures/background/background"+a+".jpg")}),b.add(this.renderParams,"fog",0,1,.001).onChange(function(a){myPortfolio.World.CurrentLayer.scene.fog=new THREE.FogExp2(0,a)}),b.add(this.renderParams,"enableTrackball"),b.add(this.renderParams,"enableMouseListener"),b.add(this.renderParams,"enableDotFilter").onChange(function(b){a.renderParams.enableDotFilter=b?!0:!1,a.refreshPostProcessing()}),b.add(this.renderParams,"enableGrid").onChange(function(a){if(document.getElementById("gridContainer"))document.getElementById("gridContainer").style.display=a?"block":"none";else{var b=document.createElement("div");b.setAttribute("id","gridContainer"),b.setAttribute("class","grid-container");var c=document.createElement("div");c.setAttribute("class","vertical-grid");var d=document.createElement("div");d.setAttribute("class","horizontal-grid"),b.appendChild(c),b.appendChild(d),document.body.appendChild(b)}}),b.add(this.renderParams,"enableGlitch").onChange(function(b){b?(a.renderParams.enableFXAA=!1,a.renderParams.enableRGBShift=!1):(a.renderParams.enableFXAA=!0,a.renderParams.enableRGBShift=!0),a.refreshPostProcessing()}),b.add(this.renderParams,"glitchType",{smooth:0,medium:1,strong:2}),b.add(this.renderParams,"enableRGBShift").onChange(function(){a.refreshPostProcessing()}),b.add(this.renderParams,"rgbValue",0,1,.001).onChange(function(){a.refreshPostProcessing()}),b.add(this.renderParams,"enableFXAA").onChange(function(){a.refreshPostProcessing()}),b.add(this.renderParams,"enableBloom").onChange(function(){a.refreshPostProcessing()}),b.add(this.renderParams,"bloomStrengh",0,10,.01).onChange(function(){a.refreshPostProcessing()}),b.add(this.renderParams,"enableSepia").onChange(function(){a.refreshPostProcessing()}),b.add(this.renderParams,"enableColorify").onChange(function(){a.refreshPostProcessing()}),b.add(this.renderParams,"enableFilm").onChange(function(){a.refreshPostProcessing()}),b.add(this.renderParams,"enableFilmBW").onChange(function(){a.refreshPostProcessing()}),b.add(this.renderParams,"filmStrengh",0,1,.001).onChange(function(){a.refreshPostProcessing()}),b.add(this.renderParams,"bleach").onChange(function(){a.refreshPostProcessing()}),b.add(this.renderParams,"bleachOpacity",0,1,.01).onChange(function(){a.refreshPostProcessing()}),b.add(this.renderParams,"technicolor").onChange(function(){a.refreshPostProcessing()}),b.add(this.renderParams,"enableTiltShift").onChange(function(){a.refreshPostProcessing()}),b.add(this.renderParams,"tiltBlur",0,20).listen().onChange(function(){a.refreshPostProcessing()}),b.add(this.renderParams,"enableVignette").onChange(function(){a.refreshPostProcessing()}),b.add(this.renderParams,"vignetteStrengh",0,40,.1).onChange(function(){a.refreshPostProcessing()}),b.add(this.renderParams,"disableEffects").onChange(function(){a.refreshPostProcessing()});var c=new dat.GUI;c.add(this.materialParams,"shaderAttr"),c.add(this.materialParams,"noise",0,.3,.001).onChange(function(a){myPortfolio.World.CurrentLayer.makehumanBody.material.uniforms.noise.value=a}),c.add(this.materialParams,"normalScale",0,10,.01).onChange(function(a){myPortfolio.World.CurrentLayer.makehumanBody.material.uniforms.normalScale.value=a,myPortfolio.World.CurrentLayer.makehumanBody.material.uniforms.tNormal.value.needsUpdate=!0}),c.add(this.materialParams,"normalRepeat",0,10,1).onChange(function(a){myPortfolio.World.CurrentLayer.makehumanBody.material.uniforms.normalRepeat.value=a,myPortfolio.World.CurrentLayer.makehumanBody.material.uniforms.tNormal.value.needsUpdate=!0}),c.add(this.materialParams,"useScreen").onChange(function(a){myPortfolio.World.CurrentLayer.makehumanBody.material.uniforms.useScreen.value=a}),c.add(this.materialParams,"useRim").onChange(function(a){myPortfolio.World.CurrentLayer.makehumanBody.material.uniforms.useRim.value=a}),c.add(this.materialParams,"rimPower",0,5,.1).onChange(function(a){myPortfolio.World.CurrentLayer.makehumanBody.material.uniforms.rimPower.value=a}),c.add(this.materialParams,"matSelected"),c.add(this.materialParams,"bodyTexture",this.materialParams.textureMap).onChange(function(a){myPortfolio.World.CurrentLayer.makehumanBody.material.uniforms.tMatCap.value=THREE.ImageUtils.loadTexture("../src/textures/matcaps/matcap"+a+".png")}),c.add(this.materialParams,"headTexture",this.materialParams.textureMap).onChange(function(a){myPortfolio.World.CurrentLayer.makehumanHead.material.uniforms.tMatCap.value=THREE.ImageUtils.loadTexture("../src/textures/matcaps/matcap"+a+".png")}),c.add(this.materialParams,"hairTexture",this.materialParams.textureMap).onChange(function(a){myPortfolio.World.CurrentLayer.makehumanHair.material.uniforms.tMatCap.value=THREE.ImageUtils.loadTexture("../src/textures/matcaps/matcap"+a+".png")}),c.add(this.materialParams,"clothTexture",this.materialParams.textureMap).onChange(function(a){myPortfolio.World.CurrentLayer.cloth.material.uniforms.tMatCap.value=THREE.ImageUtils.loadTexture("../src/textures/matcaps/matcap"+a+".png")}),c.add(this.materialParams,"lipsTexture",this.materialParams.textureMap).onChange(function(a){myPortfolio.World.CurrentLayer.lips.material.uniforms.tMatCap.value=THREE.ImageUtils.loadTexture("../src/textures/matcaps/matcap"+a+".png")}),c.add(this.materialParams,"eyeTexture",this.materialParams.eyeballMap).onChange(function(a){myPortfolio.World.CurrentLayer.eyes.material.uniforms.tMatCap.value=THREE.ImageUtils.loadTexture("../src/textures/matcaps/eyeball"+a+".png")}),c.add(this.materialParams,"lowpolyTexture",this.materialParams.textureMap).onChange(function(a){myPortfolio.World.CurrentLayer.lowpoly.material.uniforms.tMatCap.value=THREE.ImageUtils.loadTexture("../src/textures/matcaps/matcap"+a+".png")}),c.add(this.materialParams,"lowpoly2Texture",this.materialParams.textureMap).onChange(function(a){myPortfolio.World.CurrentLayer.lowpoly2.material.uniforms.tMatCap.value=THREE.ImageUtils.loadTexture("../src/textures/matcaps/matcap"+a+".png")}),c.add(this.materialParams,"lowpoly3Texture",this.materialParams.textureMap).onChange(function(a){myPortfolio.World.CurrentLayer.lowpoly3.material.uniforms.tMatCap.value=THREE.ImageUtils.loadTexture("../src/textures/matcaps/matcap"+a+".png")}),c.add(this.materialParams,"fragmentsTexture",this.materialParams.textureMap).onChange(function(a){for(var b=0;b<myPortfolio.World.CurrentLayer.fragments.length;b++)myPortfolio.World.CurrentLayer.fragments[b].material.uniforms.tMatCap.value=THREE.ImageUtils.loadTexture("../src/textures/matcaps/matcap"+a+".png")}),c.add(this.materialParams,"normalSelected"),c.add(this.materialParams,"bodyNormal",this.materialParams.normalMap).onChange(function(a){myPortfolio.World.CurrentLayer.makehumanBody.material.uniforms.tNormal.value=THREE.ImageUtils.loadTexture("../src/textures/normalMaps/normal"+a+".jpg",1),myPortfolio.World.CurrentLayer.makehumanBody.material.uniforms.tNormal.value.needsUpdate=!0}),c.add(this.materialParams,"headNormal",this.materialParams.normalMap).onChange(function(a){myPortfolio.World.CurrentLayer.makehumanHead.material.uniforms.tNormal.value=THREE.ImageUtils.loadTexture("../src/textures/normalMaps/normal"+a+".jpg",1)}),c.add(this.materialParams,"hairNormal",this.materialParams.normalMap).onChange(function(a){myPortfolio.World.CurrentLayer.makehumanHair.material.uniforms.tNormal.value=THREE.ImageUtils.loadTexture("../src/textures/normalMaps/normal"+a+".jpg",1)}),c.add(this.materialParams,"clothNormal",this.materialParams.normalMap).onChange(function(a){myPortfolio.World.CurrentLayer.cloth.material.uniforms.tNormal.value=THREE.ImageUtils.loadTexture("../src/textures/normalMaps/normal"+a+".jpg",1)}),c.add(this.materialParams,"lipsNormal",this.materialParams.normalMap).onChange(function(a){myPortfolio.World.CurrentLayer.lips.material.uniforms.tNormal.value=THREE.ImageUtils.loadTexture("../src/textures/normalMaps/normal"+a+".jpg",1)}),c.add(this.materialParams,"eyeNormal",this.materialParams.normalMap).onChange(function(a){myPortfolio.World.CurrentLayer.eyes.material.uniforms.tNormal.value=THREE.ImageUtils.loadTexture("../src/textures/normalMaps/normal"+a+".jpg",1)}),c.add(this.materialParams,"lowpolyNormal",this.materialParams.normalMap).onChange(function(a){myPortfolio.World.CurrentLayer.lowpoly.material.uniforms.tNormal.value=THREE.ImageUtils.loadTexture("../src/textures/normalMaps/normal"+a+".jpg",1)});var d=new dat.GUI;d.add(this.transitionParams,"CurrentLayer").listen(),d.add(this.transitionParams,"texture",{Perlin:1,Squares:2,Cells:3,Distort:4,Gradient:5,Radial:6}).onChange(function(b){a.transition.setTexture(b)}),d.add(this.transitionParams,"textureThreshold",0,1,.01).onChange(function(b){a.transition.setTextureThreshold(b)}),d.add(this.transitionParams,"transitionMixRatio",0,1,.01).listen(),d.add(this.transitionParams,"transitionTime",0,11,.01);var e=new dat.GUI;e.add(this.motionParams,"reverseTime").onChange(function(b){a.motionParams.reverseFactor=b?-1:1}),e.add(this.motionParams,"autoPanX"),e.add(this.motionParams,"autoPanY"),e.add(this.motionParams,"autoPanZ"),e.add(this.motionParams,"autoRotationX"),e.add(this.motionParams,"autoRotationY"),e.add(this.motionParams,"autoRotationZ"),e.add(this.motionParams,"animateFragments"),e.add(this.motionParams,"rotateSceneX"),e.add(this.motionParams,"rotateSceneY"),e.add(this.motionParams,"rotateSceneZ");var f=new dat.GUI;f.add(this.lightsParams,"fillLightEnable").onChange(function(b){a.CurrentLayer.scene.children[0]instanceof THREE.DirectionalLight&&(a.CurrentLayer.scene.children[0].visible=b)}),f.add(this.lightsParams,"fillLightIntensity",0,50,.01).onChange(function(b){a.CurrentLayer.scene.children[0]instanceof THREE.DirectionalLight&&(a.CurrentLayer.scene.children[0].intensity=b)}),f.add(this.lightsParams,"keyLightEnable").onChange(function(b){a.CurrentLayer.scene.children[1]instanceof THREE.DirectionalLight&&(a.CurrentLayer.scene.children[1].visible=b)}),f.add(this.lightsParams,"keyLightIntensity",0,50,.01).onChange(function(b){a.CurrentLayer.scene.children[1]instanceof THREE.DirectionalLight&&(a.CurrentLayer.scene.children[1].intensity=b)}),f.add(this.lightsParams,"backLightEnable").onChange(function(b){a.CurrentLayer.scene.children[2]instanceof THREE.DirectionalLight&&(a.CurrentLayer.scene.children[2].visible=b)}),f.add(this.lightsParams,"backLightIntensity",0,50,.01).onChange(function(b){a.CurrentLayer.scene.children[2]instanceof THREE.DirectionalLight&&(a.CurrentLayer.scene.children[2].intensity=b)}),f.add(this.lightsParams,"shininess",0,500,.01).onChange(function(b){a.CurrentLayer.scene.children[3]instanceof THREE.Mesh&&(a.CurrentLayer.scene.children[3].material.shininess=b)}),f.add(this.lightsParams,"rotateLights"),f.close()}},addStats:function(){this.settings.statsEnabled&&(this.fpsStats=new Stats,this.fpsStats.setMode(0),this.fpsStats.domElement.style.float="left",this.fpsStats.domElement.style.clear="both",this.fpsStats.domElement.style.width="150px",document.getElementById("statsContainer").appendChild(this.fpsStats.domElement),document.getElementById("fps").style.background="transparent",document.getElementById("fpsText").style.color="#fff",document.getElementById("fpsText").style.fontWeight="400",document.getElementById("fpsText").style.textAlign="left",document.getElementById("fpsText").style.fontFamily="Open Sans",document.getElementById("fpsText").style.paddingTop="5px",document.getElementById("fpsText").style.paddingLeft="20px",document.getElementById("fpsGraph").style.display="none")},materials:function(a){this.transparentMaterial=function(a,b){var c=new THREE.MeshNormalMaterial({color:a,opacity:b,transparent:!0});return c},this.transparentTextureMaterial=function(a){var b=new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture(a),blending:THREE.NormalBlending,side:THREE.DoubleSide,depthTest:!0,transparent:!0});return b},this.normalMaterial=function(b,c,d,e,f){var g=new THREE.ShaderMaterial({uniforms:{tNormal:{type:"t",value:THREE.ImageUtils.loadTexture(d,THREE.UVMapping,function(){b.numberAssetsLoaded++,b.loadProgressCallback()})},tMatCap:{type:"t",value:THREE.ImageUtils.loadTexture(c,THREE.UVMapping,function(){b.numberAssetsLoaded++,b.loadProgressCallback()})},time:{type:"f",value:0},bump:{type:"f",value:0},noise:{type:"f",value:a.noise},repeat:{type:"v2",value:new THREE.Vector2(1,1)},useNormal:{type:"f",value:e},useRim:{type:"f",value:f},rimPower:{type:"f",value:a.rimPower},useScreen:{type:"f",value:a.useScreen},normalScale:{type:"f",value:a.normalScale},normalRepeat:{type:"f",value:a.normalRepeat}},vertexShader:document.getElementById("vertexShader").textContent,fragmentShader:document.getElementById("fragmentShader").textContent,wrapping:THREE.ClampToEdgeWrapping,shading:THREE.SmoothShading});return g.uniforms.tMatCap.value.wrapS=g.uniforms.tMatCap.value.wrapT=THREE.ClampToEdgeWrapping,g.uniforms.tNormal.value.wrapS=g.uniforms.tNormal.value.wrapT=THREE.RepeatWrapping,g},this.matcapMaterial=function(a,b){var c=new THREE.ShaderMaterial({uniforms:{tMatCap:{type:"t",value:THREE.ImageUtils.loadTexture("../src/textures/matcaps/matcap"+b+".png",THREE.UVMapping,function(){a.numberAssetsLoaded++,a.loadProgressCallback()})}},vertexShader:document.getElementById("sem-vs").textContent,fragmentShader:document.getElementById("sem-fs").textContent,side:THREE.DoubleSide,shading:THREE.SmoothShading});return c},this.shaderNormalMaterial=function(a,b){var c=b.shininess,d=b.normalScale,e=THREE.ShaderLib.normalmap,f=THREE.UniformsUtils.clone(e.uniforms);f.enableAO.value=!0,f.enableDiffuse.value=!0,f.enableSpecular.value=!0,f.enableReflection.value=!1,f.enableDisplacement.value=!1,f.tDiffuse.value=THREE.ImageUtils.loadTexture(b.diffuseTexture,THREE.UVMapping,function(){a.numberAssetsLoaded++,a.loadProgressCallback()}),f.tSpecular.value=THREE.ImageUtils.loadTexture(b.specTexture,THREE.UVMapping,function(){a.numberAssetsLoaded++,a.loadProgressCallback()}),f.tAO.value=THREE.ImageUtils.loadTexture(b.AOTexture,THREE.UVMapping,function(){a.numberAssetsLoaded++,a.loadProgressCallback()}),f.tNormal.value=THREE.ImageUtils.loadTexture(b.normalTexture,THREE.UVMapping,function(){a.numberAssetsLoaded++,a.loadProgressCallback()}),f.uNormalScale.value.x=d,f.uNormalScale.value.y=d,f.uNormalScale.value.z=d,f.shininess.value=c;var g={fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:f,lights:!0,fog:!0},h=new THREE.ShaderMaterial(g);return h},this.bakedMaterial=function(a,b){var c=new THREE.MeshLambertMaterial({map:THREE.ImageUtils.loadTexture(b,THREE.UVMapping,function(){a.numberAssetsLoaded++,a.loadProgressCallback()})});return c},this.wireframeMaterial=function(a,b){var c=new THREE.MeshBasicMaterial({color:a,transparent:!1,opacity:1,wireframeLinewidth:b,wireframe:!0});return c}},init:function(){function a(a){g.renderParams.enableMouseListener=!0,a.preventDefault(),threejsCanvas.addEventListener("mousemove",b,!1),threejsCanvas.addEventListener("mouseup",c,!1),threejsCanvas.addEventListener("mouseout",d,!1),j=a.clientX-k,h=g.targetRotation+.001*(i-j)}function b(a){i=a.clientX-k,g.targetRotation=h+.001*(i-j)}function c(){threejsCanvas.removeEventListener("mousemove",b,!1),threejsCanvas.removeEventListener("mouseup",c,!1),threejsCanvas.removeEventListener("mouseout",d,!1),setTimeout(function(){g.renderParams.enableMouseListener=!1},300)}function d(){threejsCanvas.removeEventListener("mousemove",b,!1),threejsCanvas.removeEventListener("mouseup",c,!1),threejsCanvas.removeEventListener("mouseout",d,!1),setTimeout(function(){g.renderParams.enableMouseListener=!1},300)}function e(a){1===a.touches.length&&(a.preventDefault(),j=a.touches[0].pageX-k,h=g.targetRotation)}function f(a){1===a.touches.length&&(a.preventDefault(),i=a.touches[0].pageX-k,g.targetRotation=h+.05*(i-j))}var g=this;this.materials=new g.materials(g.materialParams),this.addGUI(),this.addStats(),this.renderer=new THREE.WebGLRenderer({canvas:threejsCanvas,antialias:this.renderParams.antialias,alpha:this.renderParams.alpha}),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(new THREE.Color(g.renderParams.backgroundColor[0]/255,g.renderParams.backgroundColor[1]/255,g.renderParams.backgroundColor[2]/255),0),this.renderer.autoClear=!0,this.renderer.shadowMapEnabled=!0,this.renderer.shadowMapSoft=!0,this.renderer.shadowCameraNear=.1,this.renderer.shadowCameraFar=100,this.renderer.shadowCameraFov=50,this.renderer.shadowMapBias=.005,this.renderer.shadowMapDarkness=.1,this.renderer.shadowMapWidth=1024,this.renderer.shadowMapHeight=1024,this.renderer.shadowMapType=THREE.PCFSoftShadowMap,this.targetRotation=0;var h=0,i=0,j=0,k=window.innerWidth/2;threejsCanvas.addEventListener("mousedown",a,!1),threejsCanvas.addEventListener("touchstart",e,!1),threejsCanvas.addEventListener("touchmove",f,!1),this.Layer=function(a,b,c,d){this.numberAssetsLoaded=0,this.totalAssetsToLoad=b+1,this.onLoadedCallback=d,this.loadProgressCallback=c,this.name=a,this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(15,g.width/g.height,.1,200),this.camera.position.z=15,this.fbo=new THREE.WebGLRenderTarget(g.width,g.height),this.loadReset=function(){var a=document.getElementById("progressBar");classie.addClass(a,"reset"),a.style.width="0%",setTimeout(function(){classie.removeClass(a,"reset")},2e3)};var e=function(a,b,c){a.skydome=new THREE.Mesh(new THREE.SphereGeometry(b,60,40),new THREE.MeshBasicMaterial({blending:THREE.NormalBlending,depthTest:!0,transparent:!0})),a.skydome.material.map=THREE.ImageUtils.loadTexture(c,THREE.UVMapping,function(){a.numberAssetsLoaded++,a.loadProgressCallback()}),a.skydome.scale.x=-1,a.scene.add(a.skydome)},f=function(a){a.fragments=[];var b=new THREE.ColladaLoader;b.options.convertUpAxis=!1,b.load("../src/collada/scene0.dae",function(b){var c=b.scene;a.scene.add(c),a.render=function(b){g.renderParams.enableTrackball&&a.trackball.update(),b?g.renderParams.enableAnaglyph?this.anaglyph.render(this.scene,this.camera):g.renderer.render(this.scene,this.camera,this.fbo,!0):g.renderParams.enableAnaglyph?this.anaglyph.render(this.scene,this.camera):this.composer.render(.01)}})},h=function(a){var b=new THREE.ColladaLoader;b.options.convertUpAxis=!1,b.load("../src/collada/scene1.dae",function(b){var c=b.scene;a.fragments=[],a.scene.add(c),e(a,8,"../src/textures/background/background6.jpg"),b.scene.traverse(function(b){if(b instanceof THREE.Object3D){var c=null;-1!==b.name.indexOf("makehuman_Body")?(c=b.children[0],c.receiveShadow=!1,c.castShadow=!1,c.geometry.computeTangents(),c.material=g.materials.normalMaterial(a,"../src/textures/matcaps/matcap16.png","../src/textures/normalMaps/normal"+g.materialParams.bodyNormal+".jpg",1,!1),a.makehumanBody=c):"lowpoly"===b.name&&(c=b.children[0],c.material=g.materials.matcapMaterial(a,109),c.receiveShadow=!1,c.castShadow=!1,a.lowpoly=c)}}),myPortfolio.World.targetRotation=a.scene.rotation.y+=60*Math.PI/180,a.scene.position.x+=1,a.rotationSpeed=5e-4,a.rotationFactor=document.getElementById("rotationBar"),a.render=function(b){g.renderParams.enableTrackball&&a.trackball.update(),g.renderParams.enableMouseListener?a.scene.rotation.y+=.05*(g.targetRotation-a.scene.rotation.y):myPortfolio.World.targetRotation=a.scene.rotation.y+=a.rotationSpeed*parseFloat(a.rotationFactor.value),b?g.renderParams.enableAnaglyph?this.anaglyph.render(this.scene,this.camera):g.renderer.render(this.scene,this.camera,this.fbo,!0):g.renderParams.enableAnaglyph?this.anaglyph.render(this.scene,this.camera):this.composer.render(.01)}})},i=function(a){var b=new THREE.ColladaLoader;b.options.convertUpAxis=!1,b.load("../src/collada/scene2.dae",function(b){var c=b.scene;a.fragments=[],a.scene.add(c),e(a,10,"../src/textures/background/background11.jpg"),b.scene.traverse(function(b){if(b instanceof THREE.Object3D){var c=null;-1!==b.name.indexOf("makehuman_Body")?(c=b.children[0],c.receiveShadow=!1,c.castShadow=!1,c.geometry.computeTangents(),c.material=g.materials.normalMaterial(a,"../src/textures/matcaps/matcap102.png","../src/textures/normalMaps/normal"+g.materialParams.bodyNormal+".jpg",1,!0),a.makehumanBody=c):-1!==b.name.indexOf("lowpoly")?(c=b.children[0],c.receiveShadow=!1,c.castShadow=!1,c.material=g.materials.matcapMaterial(a,16),a.lowpoly=c):-1!==b.name.indexOf("makehuman_HighPolyEyes")&&(c=b.children[0],c.geometry.computeTangents(),c.material=g.materials.normalMaterial(a,"../src/textures/matcaps/eyeball8.png","../src/textures/normalMaps/normal1.jpg",0,!0),a.eyes=c)}}),myPortfolio.World.targetRotation=a.scene.rotation.y-=20*Math.PI/180,a.rotationSpeed=5e-4,a.rotationFactor=document.getElementById("rotationBar"),a.render=function(b){g.renderParams.enableMouseListener?a.scene.rotation.y+=.05*(g.targetRotation-a.scene.rotation.y):myPortfolio.World.targetRotation=a.scene.rotation.y+=a.rotationSpeed*parseFloat(a.rotationFactor.value),g.renderParams.enableTrackball&&a.trackball.update(),b?g.renderParams.enableAnaglyph?this.anaglyph.render(this.scene,this.camera):g.renderer.render(this.scene,this.camera,this.fbo,!0):g.renderParams.enableAnaglyph?this.anaglyph.render(this.scene,this.camera):this.composer.render(.01)}})},j=function(a){var b=new THREE.ColladaLoader;b.options.convertUpAxis=!1,b.load("../src/collada/scene3.dae",function(b){var c=b.scene;a.fragments=[],a.scene.add(c),e(a,10,"../src/textures/background/background6.jpg"),b.scene.traverse(function(b){if(b instanceof THREE.Object3D){var c=null;-1!==b.name.indexOf("makehuman_Body")?(c=b.children[0],c.receiveShadow=!1,c.castShadow=!1,c.geometry.computeTangents(),c.material=g.materials.matcapMaterial(a,71),a.makehumanBody=c):"lowpoly"===b.name?(c=b.children[0],c.receiveShadow=!1,c.castShadow=!1,c.geometry.computeTangents(),c.material=g.materials.matcapMaterial(a,71),a.lowpoly=c):"lowpoly2"===b.name?(c=b.children[0],c.receiveShadow=!1,c.castShadow=!1,c.geometry.computeTangents(),c.material=g.materials.matcapMaterial(a,17),a.lowpoly2=c):-1!==b.name.indexOf("makehuman_HighPolyEyes")&&(c=b.children[0],c.geometry.computeTangents(),c.material=g.materials.normalMaterial(a,"../src/textures/matcaps/eyeball8.png","../src/textures/normalMaps/normal1.jpg",0,!0),a.eyes=c)}}),a.rotationSpeed=5e-4,a.rotationFactor=document.getElementById("rotationBar"),a.render=function(b){g.renderParams.enableMouseListener?a.scene.rotation.y+=.05*(g.targetRotation-a.scene.rotation.y):myPortfolio.World.targetRotation=a.scene.rotation.y+=a.rotationSpeed*parseFloat(a.rotationFactor.value),g.renderParams.enableTrackball&&a.trackball.update(),b?g.renderParams.enableAnaglyph?this.anaglyph.render(this.scene,this.camera):g.renderer.render(this.scene,this.camera,this.fbo,!0):g.renderParams.enableAnaglyph?this.anaglyph.render(this.scene,this.camera):this.composer.render(.01)}})},k=function(a){var b=new THREE.ColladaLoader;b.options.convertUpAxis=!1,b.load("../src/collada/scene4.dae",function(b){var c=b.scene;a.fragments=[],a.scene.add(c),e(a,10,"../src/textures/background/background11.jpg"),b.scene.traverse(function(b){if(b instanceof THREE.Object3D){var c=null;-1!==b.name.indexOf("makehuman_Body")?(c=b.children[0],c.receiveShadow=!1,c.castShadow=!1,c.geometry.computeTangents(),c.material=g.materials.matcapMaterial(a,22),a.makehumanBody=c):"lowpoly"===b.name?(c=b.children[0],c.receiveShadow=!1,c.castShadow=!1,c.material=g.materials.matcapMaterial(a,76),a.lowpoly=c):"lowpoly2"===b.name?(c=b.children[0],c.receiveShadow=!1,c.castShadow=!1,c.material=g.materials.matcapMaterial(a,76),a.lowpoly=c):-1!==b.name.indexOf("makehuman_HighPolyEyes")?(c=b.children[0],c.geometry.computeTangents(),c.material=g.materials.normalMaterial(a,"../src/textures/matcaps/eyeball8.png","../src/textures/normalMaps/normal1.jpg",0,!0),a.eyes=c):-1!==b.name.indexOf("cell")&&(c=b.children[0],c.material=g.materials.matcapMaterial(a,76),c.receiveShadow=!1,c.castShadow=!1,a.fragments.push(c))}}),myPortfolio.World.targetRotation=a.scene.rotation.y-=105*Math.PI/180,a.rotationSpeed=5e-4,a.rotationFactor=document.getElementById("rotationBar"),a.render=function(b){g.renderParams.enableMouseListener?a.scene.rotation.y+=.05*(g.targetRotation-a.scene.rotation.y):myPortfolio.World.targetRotation=a.scene.rotation.y+=a.rotationSpeed*parseFloat(a.rotationFactor.value),g.renderParams.enableTrackball&&a.trackball.update(),b?g.renderParams.enableAnaglyph?this.anaglyph.render(this.scene,this.camera):g.renderer.render(this.scene,this.camera,this.fbo,!0):g.renderParams.enableAnaglyph?this.anaglyph.render(this.scene,this.camera):this.composer.render(.01)}})},l=function(a){var b=new THREE.ColladaLoader;b.options.convertUpAxis=!1,b.load("../src/collada/scene5.dae",function(b){var c=b.scene;a.fragments=[],a.scene.add(c),e(a,10,"../src/textures/background/background11.jpg"),b.scene.traverse(function(b){if(b instanceof THREE.Object3D){var c=null;-1!==b.name.indexOf("makehuman_Body")?(c=b.children[0],c.receiveShadow=!1,c.castShadow=!1,c.geometry.computeTangents(),c.material=g.materials.normalMaterial(a,"../src/textures/matcaps/matcap36.png","../src/textures/normalMaps/normal"+g.materialParams.bodyNormal+".jpg",1,!0),a.makehumanBody=c):"lowpoly"===b.name?(c=b.children[0],c.material=g.materials.matcapMaterial(a,1),c.receiveShadow=!1,c.castShadow=!1,a.lowpoly=c):"makehuman_Hair"===b.name?(c=b.children[0],c.material=g.materials.matcapMaterial(a,12),a.makehumanHair=c):-1!==b.name.indexOf("makehuman_HighPolyEyes")?(c=b.children[0],c.geometry.computeTangents(),c.material=g.materials.normalMaterial(a,"../src/textures/matcaps/eyeball8.png","../src/textures/normalMaps/normal1.jpg",0,!0),a.eyes=c):-1!==b.name.indexOf("makehuman_Eyebrow")?(c=b.children[0],c.material=new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture("../src/textures/UVmaps/eyebrow.png"),blending:THREE.NormalBlending,depthTest:!0,transparent:!0}),a.makehumanEyebrows=c):-1!==b.name.indexOf("makehuman_Eyelashes")?(c=b.children[0],c.material=new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture("../src/textures/UVmaps/eyelashes.png"),blending:THREE.NormalBlending,depthTest:!0,transparent:!0}),a.makehumanEyelashes=c):-1!==b.name.indexOf("cell")&&(c=b.children[0],c.material=g.materials.matcapMaterial(a,1),c.receiveShadow=!1,c.castShadow=!1,a.fragments.push(c))
}}),myPortfolio.World.targetRotation=a.scene.rotation.y-=0*Math.PI/180,a.rotationSpeed=5e-4,a.rotationFactor=document.getElementById("rotationBar"),a.render=function(b){for(var c=0;c<a.fragments.length;c++)a.fragments[c].rotation.x+=2*a.rotationSpeed,a.fragments[c].rotation.y+=2*a.rotationSpeed,a.fragments[c].rotation.z+=2*a.rotationSpeed,a.fragments[c].position.y+=3e-4;g.renderParams.enableMouseListener?a.scene.rotation.y+=.05*(g.targetRotation-a.scene.rotation.y):myPortfolio.World.targetRotation=a.scene.rotation.y+=a.rotationSpeed*parseFloat(a.rotationFactor.value),g.renderParams.enableTrackball&&a.trackball.update(),b?g.renderParams.enableAnaglyph?this.anaglyph.render(this.scene,this.camera):g.renderer.render(this.scene,this.camera,this.fbo,!0):g.renderParams.enableAnaglyph?this.anaglyph.render(this.scene,this.camera):this.composer.render(.01)}})},m=function(a){var b=new THREE.ColladaLoader;b.options.convertUpAxis=!1,b.load("../src/collada/scene6.dae",function(b){var c=b.scene;a.scene.add(c),e(a,10,"../src/textures/background/background6.jpg"),b.scene.traverse(function(b){if(b instanceof THREE.Object3D){var c=null;if(-1!==b.name.indexOf("makehuman_Body"))c=b.children[0],c.receiveShadow=!1,c.castShadow=!1,c.geometry.computeTangents(),c.material=g.materials.normalMaterial(a,"../src/textures/matcaps/matcap36.png","../src/textures/normalMaps/normal"+g.materialParams.bodyNormal+".jpg",1,!0),a.makehumanBody=c;else if("lowpoly"===b.name){c=b.children[0],c.receiveShadow=!1,c.castShadow=!1;var d=new THREE.SubdivisionModifier(2);d.modify(c.geometry),c.material=g.materials.matcapMaterial(a,60),a.lowpoly=c}else"lowpoly2"===b.name?(c=b.children[0],c.receiveShadow=!1,c.castShadow=!1,c.material=g.materials.matcapMaterial(a,94),a.lowpoly2=c):"makehuman_HighPolyEyes"===b.name?(c=b.children[0],c.geometry.computeTangents(),c.material=g.materials.normalMaterial(a,"../src/textures/matcaps/eyeball8.png","../src/textures/normalMaps/normal1.jpg",0,!0),a.eyes=c):"makehuman_Eyebrow"===b.name?(c=b.children[0],c.material=new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture("../src/textures/UVmaps/eyebrow.png"),blending:THREE.NormalBlending,depthTest:!0,transparent:!0}),a.makehumanEyebrows=c):"makehuman_Eyelashes"===b.name&&(c=b.children[0],c.material=new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture("../src/textures/UVmaps/eyelashes.png"),blending:THREE.NormalBlending,depthTest:!0,transparent:!0}),a.makehumanEyelashes=c)}}),myPortfolio.World.targetRotation=a.scene.rotation.y-=70*Math.PI/180,a.rotationFactor=document.getElementById("rotationBar"),a.rotationSpeed=5e-4,a.render=function(b){g.renderParams.enableMouseListener?a.scene.rotation.y+=.05*(g.targetRotation-a.scene.rotation.y):myPortfolio.World.targetRotation=a.scene.rotation.y+=a.rotationSpeed*parseFloat(a.rotationFactor.value),g.renderParams.enableTrackball&&a.trackball.update(),b?g.renderParams.enableAnaglyph?this.anaglyph.render(this.scene,this.camera):g.renderer.render(this.scene,this.camera,this.fbo,!0):g.renderParams.enableAnaglyph?this.anaglyph.render(this.scene,this.camera):this.composer.render(.01)}})},n=function(a){var b=new THREE.ColladaLoader;b.options.convertUpAxis=!1,b.load("../src/collada/scene7.dae",function(b){var c=b.scene;a.fragments=[],a.scene.add(c),e(a,8,"../src/textures/background/background6.jpg");var d=null;b.scene.traverse(function(b){b instanceof THREE.Object3D&&("head"===b.name?(d=b.children[0],d.receiveShadow=!1,d.castShadow=!1,d.geometry.computeTangents(),d.material=g.materials.normalMaterial(a,"../src/textures/matcaps/matcap65.png","../src/textures/normalMaps/normal19.jpg",1,!1),a.makehumanBody=d):"lowpoly"===b.name&&(d=b.children[0],d.material=g.materials.matcapMaterial(a,58),d.receiveShadow=!1,d.castShadow=!1,a.lowpoly=d))}),myPortfolio.World.targetRotation=a.scene.rotation.y+=80*Math.PI/180,a.rotationFactor=document.getElementById("rotationBar"),a.rotationSpeed=5e-4,a.render=function(b){g.renderParams.enableMouseListener?a.scene.rotation.y+=.05*(g.targetRotation-a.scene.rotation.y):myPortfolio.World.targetRotation=a.scene.rotation.y+=a.rotationSpeed*parseFloat(a.rotationFactor.value),g.renderParams.enableTrackball&&a.trackball.update(),b?g.renderParams.enableAnaglyph?this.anaglyph.render(this.scene,this.camera):g.renderer.render(this.scene,this.camera,this.fbo,!0):g.renderParams.enableAnaglyph?this.anaglyph.render(this.scene,this.camera):this.composer.render(.01)}})},o=function(a){var b=new THREE.ColladaLoader;b.options.convertUpAxis=!1,b.load("../src/collada/scene8.dae",function(b){var c=b.scene;a.scene.add(c),e(a,8,"../src/textures/background/background6.jpg"),b.scene.traverse(function(b){if(b instanceof THREE.Object3D){var c=null;-1!==b.name.indexOf("makehuman")?(c=b.children[0],c.receiveShadow=!1,c.castShadow=!1,c.geometry.computeTangents(),c.material=g.materials.normalMaterial(a,"../src/textures/matcaps/matcap87.png","../src/textures/normalMaps/normal"+g.materialParams.bodyNormal+".jpg",1,!1),a.makehumanBody=c):"lowpoly"===b.name?(c=b.children[0],c.material=g.materials.matcapMaterial(a,58),c.receiveShadow=!1,c.castShadow=!1,a.lowpoly=c):"lowpoly2"===b.name?(c=b.children[0],c.material=g.materials.matcapMaterial(a,58),c.receiveShadow=!1,c.castShadow=!1,a.lowpoly2=c):"lowpoly3"===b.name&&(c=b.children[0],c.material=g.materials.matcapMaterial(a,58),c.receiveShadow=!1,c.castShadow=!1,a.lowpoly3=c)}}),myPortfolio.World.targetRotation=a.scene.rotation.y-=30*Math.PI/180,a.scene.position.y+=.6,a.scene.position.x-=2,a.rotationSpeed=5e-4,a.rotationFactor=document.getElementById("rotationBar"),a.render=function(b){g.renderParams.enableTrackball&&a.trackball.update(),g.renderParams.enableMouseListener?a.scene.rotation.y+=.05*(g.targetRotation-a.scene.rotation.y):myPortfolio.World.targetRotation=a.scene.rotation.y+=a.rotationSpeed*parseFloat(a.rotationFactor.value),b?g.renderParams.enableAnaglyph?this.anaglyph.render(this.scene,this.camera):g.renderer.render(this.scene,this.camera,this.fbo,!0):g.renderParams.enableAnaglyph?this.anaglyph.render(this.scene,this.camera):this.composer.render(.01)}})},p=function(a){var b=new THREE.ColladaLoader;b.options.convertUpAxis=!1,b.load("../src/collada/scene9.dae",function(b){var c=b.scene;a.scene.add(c),e(a,7,"../src/textures/background/background11.jpg"),b.scene.traverse(function(b){if(b instanceof THREE.Object3D){var c=null;if("lowpoly"===b.name){c=b.children[0];var d=new THREE.SubdivisionModifier(1);d.modify(c.geometry),c.material=g.materials.matcapMaterial(a,89),c.receiveShadow=!1,c.castShadow=!1,a.lowpoly=c}else"Ground"===b.name&&(c=b.children[0],c.material=g.materials.bakedMaterial(a,"../src/textures/UVmaps/plane-bake.png"),c.receiveShadow=!1,c.castShadow=!1,a.ground=c)}}),a.scene.position.y-=.1,myPortfolio.World.targetRotation=a.scene.rotation.y-=120*Math.PI/180,a.rotationFactor=document.getElementById("rotationBar"),a.rotationSpeed=5e-4,a.render=function(b){g.renderParams.enableMouseListener?a.scene.rotation.y+=.05*(g.targetRotation-a.scene.rotation.y):myPortfolio.World.targetRotation=a.scene.rotation.y+=a.rotationSpeed*parseFloat(a.rotationFactor.value),g.renderParams.enableTrackball&&a.trackball.update(),b?g.renderParams.enableAnaglyph?this.anaglyph.render(this.scene,this.camera):g.renderer.render(this.scene,this.camera,this.fbo,!0):g.renderParams.enableAnaglyph?this.anaglyph.render(this.scene,this.camera):this.composer.render(.01)}})};switch(g.renderParams.enableTrackball&&(this.trackball=new THREE.TrackballControls(this.camera,g.renderer.domElement),this.trackball.rotateSpeed=1,this.trackball.zoomSpeed=1.2,this.trackball.panSpeed=.8,this.trackball.noZoom=!1,this.trackball.noPan=!1,this.trackball.staticMoving=!0,this.trackball.dynamicDampingFactor=.3,this.trackball.keys=[65,83,68]),this.numberAssetsLoaded=1,this.loadProgressCallback(),this.name){case"scene0":f(this);break;case"scene1":h(this);break;case"scene2":i(this);break;case"scene3":j(this);break;case"scene4":k(this);break;case"scene5":l(this);break;case"scene6":m(this);break;case"scene7":n(this);break;case"scene8":o(this);break;case"scene9":p(this);break;default:console.error("ERROR: unknow scene.")}g.postprocess.apply(this),this.render=function(a){a?g.renderer.render(this.scene,this.camera,this.fbo,!0):(g.renderer.clear(),g.renderParams.enableTrackball&&this.trackball.update(),this.composer.render(.01))}},this.Transition=function(a,b){this.scene=new THREE.Scene,this.camera=new THREE.OrthographicCamera(g.width/-2,g.width/2,g.height/2,g.height/-2,-10,10),this.texture=new THREE.ImageUtils.loadTexture("../src/textures/transitions/transition"+g.transitionParams.texture+".jpg",THREE.UVMapping),this.quadmaterial=new THREE.ShaderMaterial({uniforms:{tDiffuse1:{type:"t",value:null},tDiffuse2:{type:"t",value:null},mixRatio:{type:"f",value:0},threshold:{type:"f",value:g.transitionParams.textureThreshold},useTexture:{type:"i",value:1},tMixTexture:{type:"t",value:this.texture}},vertexShader:["varying vec2 vUv;","void main() {","vUv = vec2( uv.x, uv.y );","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float mixRatio;","uniform sampler2D tDiffuse1;","uniform sampler2D tDiffuse2;","uniform sampler2D tMixTexture;","uniform int useTexture;","uniform float threshold;","varying vec2 vUv;","void main() {","vec4 texel1 = texture2D( tDiffuse1, vUv );","vec4 texel2 = texture2D( tDiffuse2, vUv );","if (useTexture==1) {","vec4 transitionTexel = texture2D( tMixTexture, vUv );","float r = mixRatio * (1.0 + threshold * 2.0) - threshold;","float mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);","gl_FragColor = mix( texel1, texel2, mixf );","} else {","gl_FragColor = mix( texel2, texel1, mixRatio );","}","}"].join("\n")});var c=new THREE.PlaneBufferGeometry(window.innerWidth,window.innerHeight);this.quad=new THREE.Mesh(c,this.quadmaterial),this.scene.add(this.quad),this.quadmaterial.uniforms.tDiffuse1.value=a.fbo,this.quadmaterial.uniforms.tDiffuse2.value=b.fbo,this.needChange=!0,this.setTextureThreshold=function(a){this.quadmaterial.uniforms.threshold.value=a},this.useTexture=function(a){this.quadmaterial.uniforms.useTexture.value=a?1:0},this.setTexture=function(){this.quadmaterial.uniforms.tMixTexture.value=this.texture},g.postprocess.apply(this),this.render=function(){this.quadmaterial.uniforms.mixRatio.value=g.transitionParams.transitionMixRatio,1===g.transitionParams.transitionMixRatio?(g.transitionParams.CurrentLayer=a.name,a.render(!1)):0===g.transitionParams.transitionMixRatio?(g.transitionParams.CurrentLayer=b.name,b.render(!1)):-1===g.transitionParams.transitionMixRatio?(g.transitionParams.CurrentLayer=b.name,a.render(!1),b.render(!1)):(g.transitionParams.CurrentLayer="Transition",a.render(!0),b.render(!0),this.composer.render(.01))}},this.postprocess=function(){this.composer=new THREE.EffectComposer(g.renderer);var a=new THREE.RenderPass(this.scene,this.camera);if(this.composer.addPass(a),!g.renderParams.disableEffects){if(g.renderParams.enableAnaglyph&&(this.anaglyph=new THREE.AnaglyphEffect(g.renderer,g.width,g.height,g.renderParams.focus)),g.renderParams.enableGlitch){var b=new THREE.GlitchPass(g.renderParams.glitchType);this.composer.addPass(b)}if(g.renderParams.enableFilm){var c=new THREE.FilmPass(g.renderParams.filmStrengh,0,0,!1);this.composer.addPass(c)}if(g.renderParams.enableFilmBW){var d=new THREE.FilmPass(g.renderParams.filmStrengh,.2,1024,!0);this.composer.addPass(d)}if(g.renderParams.enableColorify){var e=new THREE.ShaderPass(THREE.ColorifyShader);e.uniforms.color.value.setRGB(1,.8,.8),this.composer.addPass(e)}if(g.renderParams.enableBloom){var f=new THREE.BloomPass(g.renderParams.bloomStrengh);this.composer.addPass(f)}if(g.renderParams.enableDotFilter){var h=new THREE.DotScreenPass(new THREE.Vector2(0,0),.5,.8);this.composer.addPass(h)}if(g.renderParams.bleach){var i=new THREE.ShaderPass(THREE.BleachBypassShader);i.uniforms.opacity.value=g.renderParams.bleachOpacity,this.composer.addPass(i)}if(g.renderParams.technicolor){var j=new THREE.ShaderPass(THREE.Technicolor3Shader);this.composer.addPass(j)}if(g.renderParams.enableSepia){var k=new THREE.ShaderPass(THREE.SepiaShader);this.composer.addPass(k)}if(g.renderParams.enableVignette){var l=new THREE.ShaderPass(THREE.VignetteShader);l.uniforms.darkness.value=g.renderParams.vignetteStrengh,l.uniforms.offset.value=.3,this.composer.addPass(l)}if(g.renderParams.enableRGBShift){var m=new THREE.ShaderPass(THREE.RGBShiftShader);m.uniforms.amount.value=g.renderParams.rgbValue,this.composer.addPass(m)}if(g.renderParams.enableTiltShift){var n=new THREE.ShaderPass(THREE.HorizontalTiltShiftShader),o=new THREE.ShaderPass(THREE.VerticalTiltShiftShader),p=g.renderParams.tiltBlur;n.uniforms.h.value=p/g.width,o.uniforms.v.value=p/g.height,n.uniforms.r.value=o.uniforms.r.value=.5,this.composer.addPass(n),this.composer.addPass(o)}if(g.renderParams.enableFXAA){var q=new THREE.ShaderPass(THREE.FXAAShader);q.uniforms.resolution.value.set(1/g.width,1/g.height),this.composer.addPass(q)}}var r=new THREE.ShaderPass(THREE.CopyShader);this.composer.addPass(r),r.renderToScreen=!0},this.refreshPostProcessing=function(){this.postprocess.apply(this.CurrentLayer)},this.onWindowResize=function(){var a=document.getElementById("settingsFullscreenOn"),b=document.getElementById("settingsFullscreenOff");g.width=window.innerWidth,g.height=window.innerHeight,g.CurrentLayer.camera.aspect=g.width/g.height,g.CurrentLayer.fbo=new THREE.WebGLRenderTarget(g.width,g.height),g.CurrentLayer.camera.updateProjectionMatrix(),g.renderParams.enableAnaglyph?myPortfolio.World.CurrentLayer.anaglyph.setSize(g.width,g.height):(g.transition.quadmaterial.uniforms.tDiffuse1.value=g.CurrentLayer.fbo,g.renderer.setSize(g.width,g.height),g.refreshPostProcessing());var c=window.screen.height,d=window.screen.width,e=window.outerHeight,f=window.outerWidth;d===f&&c===e?(classie.toggleClass(a,"active"),classie.toggleClass(b,"active")):(classie.removeClass(a,"active"),classie.addClass(b,"active"))}},start:function(){var a=this,b=document.getElementById("menu"),c=document.getElementById("burguerMenu"),d=document.getElementById("initLoadingScreen"),e=document.getElementById("initIntroScreen"),f=document.getElementById("initIntroTitle"),g=document.getElementById("initIntroSubtitle"),h=document.getElementById("footerInfoSection"),i=document.getElementById("introInfo"),j=document.getElementById("menuItemActive");this.init(),this.transitionParams.clock.elapsedTime=0,this.CurrentLayer=new this.Layer("scene0",1,function(){},function(){}),this.NextLayer=new myPortfolio.World.Layer("scene1",4,function(){var a=this.numberAssetsLoaded/this.totalAssetsToLoad*100;document.getElementById("initProgressBar").style.width=a+"%",this.numberAssetsLoaded===this.totalAssetsToLoad&&this.onLoadedCallback()},function(){setTimeout(function(){classie.addClass(d,"hide")},2e3),setTimeout(function(){myPortfolio.World.transitionParams.transitionMixRatio=1,myPortfolio.World.transition=new myPortfolio.World.Transition(myPortfolio.World.CurrentLayer,myPortfolio.World.NextLayer),myPortfolio.World.CurrentLayer=myPortfolio.World.NextLayer;var a=function(){myPortfolio.World.transitionParams.transitionMixRatio=b.x},b={x:1},c=new TWEEN.Tween(b).to({x:0},22e3,TWEEN.Easing.Exponential.In).onUpdate(a);c.start(),myPortfolio.SoundFx.backgroundMusic.play(0)},2500),setTimeout(function(){d.parentNode.removeChild(d),classie.addClass(g,"show")},4e3),setTimeout(function(){classie.removeClass(g,"show")},7e3),setTimeout(function(){function a(){var b=document.querySelectorAll("span.fallen");if(0!==b.length){var c=Math.floor(Math.random()*b.length);classie.removeClass(b[c],"fallen"),classie.addClass(b[c],"normal"),window.setTimeout(a,150)}}classie.addClass(f,"show");var b=document.getElementById("letteringTitle").innerHTML,c="";[].forEach.call(b.split(""),function(a){var b=a.replace(/\s/g,unescape("%a0"));c+='<span class="lettering fallen">'+b+"</span>"}),document.getElementById("letteringTitle").innerHTML=c,a()},1e4),setTimeout(function(){classie.addClass(i,"show")},15e3),setTimeout(function(){function a(){var b=document.querySelectorAll("span.normal");if(0!==b.length){var c=Math.floor(Math.random()*b.length);classie.removeClass(b[c],"normal"),classie.addClass(b[c],"lift"),window.setTimeout(a,50)}}var b=document.getElementById("introInfo").innerHTML,c="";[].forEach.call(b.split(""),function(a){var b=a.replace(/\s/g,unescape("%a0"));c+='<span class="lettering normal">'+b+"</span>"}),document.getElementById("introInfo").innerHTML=c,a(),classie.removeClass(g,"show")},18500),setTimeout(function(){classie.addClass(e,"hide"),classie.removeClass(h,"hide"),classie.removeClass(b,"hide"),classie.removeClass(c,"hide")},23500),setTimeout(function(){e.parentNode.removeChild(e),classie.addClass(j,"pos1")},24500)}),this.transition=new this.Transition(this.NextLayer,this.CurrentLayer);var k=function(){requestAnimationFrame(k),l()},l=function(){a.settings.statsEnabled&&a.fpsStats.update(a.renderer),TWEEN.update(),a.transition.render()};k();var m;window.onresize=function(){clearTimeout(m),m=setTimeout(function(){a.onWindowResize()},100)}}},this.UI={initUI:function(){function a(a){classie.addClass(G,"hide"),setTimeout(function(){G.innerHTML=a,classie.removeClass(G,"hide")},500)}function b(){classie.hasClass(B,"open")?(i.hideAllSections(),classie.addClass(k,"active"),classie.removeClass(t,"show"),classie.removeClass(v,"hide"),a("::home")):(i.hideAllSections(),i.resetMenuItemActive(),classie.addClass(v,"hide"),a("::menu")),classie.toggleClass(I,"open"),classie.toggleClass(B,"open")}function c(a){classie.removeClass(H,"pos1"),classie.removeClass(H,"pos2"),classie.removeClass(H,"pos3"),classie.removeClass(H,"pos4"),classie.removeClass(H,"pos5"),classie.removeClass(H,"pos6"),classie.removeClass(H,"pos7"),classie.removeClass(H,"pos8"),classie.removeClass(H,"pos9"),classie.addClass(H,"pos"+a)}function d(a){a=window.event||a;var b=Math.max(-1,Math.min(1,a.wheelDelta||-a.detail)),c=0,d=0;[].forEach.call(K,function(a){classie.hasClass(a,"active")&&(d=c),c++}),b>0&&d>0?K[d-1].click():0>b&&d<K.length-1&&K[d+1].click()}function e(a,b){return myPortfolio.World.CurrentLayer.name==="scene"+a?(classie.removeClass(myPortfolio.UI.webglCanvas,"hide"),classie.removeClass(v,"hide"),myPortfolio.UI.hideAllSections(),myPortfolio.UI.resetMenuItemActive(),void(myPortfolio.World.transitionParams.transitionMixRatio=0)):(myPortfolio.World.transitionParams.transitionMixRatio=1,classie.addClass(x,"show"),myPortfolio.World.CurrentLayer=new myPortfolio.World.Layer("scene0",1,function(){},function(){}),void(myPortfolio.World.NextLayer=new myPortfolio.World.Layer("scene"+a,b,function(){var a=this.numberAssetsLoaded/this.totalAssetsToLoad*100;if(z.style.width=a+"%",this.numberAssetsLoaded===this.totalAssetsToLoad){var b=this;setTimeout(function(){classie.removeClass(x,"show"),myPortfolio.UI.hideAllSections(),myPortfolio.UI.resetMenuItemActive(),b.onLoadedCallback()},2e3),setTimeout(function(){b.loadReset()},4e3)}},function(){classie.removeClass(myPortfolio.UI.webglCanvas,"hide"),classie.removeClass(v,"hide"),classie.addClass(y,"show"),myPortfolio.World.transition=new myPortfolio.World.Transition(myPortfolio.World.CurrentLayer,myPortfolio.World.NextLayer),myPortfolio.World.transitionParams.transitionMixRatio=0,myPortfolio.World.CurrentLayer=myPortfolio.World.NextLayer,[].forEach.call(M,function(a){classie.removeClass(a,"hide")}),classie.addClass(M[a-1],"hide"),classie.addClass(k,"active")})))}function f(a){return myPortfolio.World.transitionParams.transitionMixRatio=-1,myPortfolio.UI.videoBackground.modelNumber===a?(myPortfolio.UI.hideAllSections(),myPortfolio.UI.resetMenuItemActive(),void classie.removeClass(v,"hide")):(classie.addClass(myPortfolio.UI.videoBackground,"hide"),myPortfolio.UI.videoBackground.modelNumber=a,myPortfolio.UI.changeBackgroundVideo(a),classie.addClass(x,"show"),z.style.width="100%",void setTimeout(function(){classie.removeClass(x,"show"),myPortfolio.UI.hideAllSections(),myPortfolio.UI.resetMenuItemActive(),[].forEach.call(M,function(a){classie.removeClass(a,"hide")}),classie.addClass(z,"reset"),z.style.width="0%",setTimeout(function(){classie.removeClass(z,"reset"),classie.removeClass(v,"hide"),classie.removeClass(myPortfolio.UI.videoBackground,"hide"),classie.addClass(M[a-1],"hide")},1e3)},3e3))}function g(a){var b=myPortfolio.World.CurrentLayer,c=new TWEEN.Tween(b.scene.position).to({x:b.scene.position.x,y:b.scene.position.y,z:a},1e3);c.easing(TWEEN.Easing.Quadratic.Out).start()}function h(a){a=a||event,(84===a.keyCode||116===a.keyCode)&&(classie.toggleClass(j,"hide"),classie.toggleClass(v,"hide"))}this.selectedModel=1;var i=this,j=document.getElementById("menu"),k=document.getElementById("homeAnchor"),l=document.getElementById("aboutAnchor"),m=document.getElementById("galleryAnchor"),n=document.getElementById("contactAnchor"),o=document.getElementById("creditsAnchor"),p=document.getElementById("settingsIcon"),q=document.getElementById("aboutSection"),r=document.getElementById("contactSection"),s=document.getElementById("creditsSection"),t=document.getElementById("settingsSection"),u=document.getElementById("gallerySection"),v=document.getElementById("footerInfoSection"),w=document.getElementById("menuItemActive"),x=document.getElementById("modelLoadingScreen"),y=document.getElementById("currentModelInfo"),z=document.getElementById("progressBar"),A=document.getElementById("videoBackground");this.webglCanvas=document.getElementById("threejsCanvas"),"Other"===myPortfolio.System.browser.name&&(document.getElementById("fullscreenSettings").style.display="none",document.getElementById("modelSettings").style.display="none"),this.hideAllSections=function(){classie.addClass(q,"hide"),classie.addClass(r,"hide"),classie.addClass(s,"hide"),classie.removeClass(u,"show"),classie.removeClass(y,"show")},this.resetMenuItemActive=function(){classie.removeClass(k,"active"),classie.removeClass(l,"active"),classie.removeClass(m,"active"),classie.removeClass(n,"active"),classie.removeClass(o,"active"),classie.addClass(w,"pos1"),classie.removeClass(w,"pos2"),classie.removeClass(w,"pos3"),classie.removeClass(w,"pos4"),classie.removeClass(w,"pos5")},k.addEventListener("click",function(){i.hideAllSections(),i.resetMenuItemActive(),classie.addClass(k,"active"),classie.removeClass(v,"hide"),classie.addClass(y,"show")}),l.addEventListener("click",function(){classie.hasClass(q,"hide")?(i.hideAllSections(),classie.toggleClass(q,"hide"),i.resetMenuItemActive(),classie.addClass(l,"active"),classie.addClass(w,"pos2"),classie.removeClass(v,"hide")):k.click()}),m.addEventListener("click",function(){classie.hasClass(u,"show")?k.click():(i.hideAllSections(),classie.toggleClass(u,"show"),i.resetMenuItemActive(),classie.addClass(m,"active"),classie.addClass(w,"pos3"),classie.removeClass(t,"show"),classie.addClass(v,"hide"))}),n.addEventListener("click",function(){classie.hasClass(r,"hide")?(i.hideAllSections(),classie.toggleClass(r,"hide"),i.resetMenuItemActive(),classie.addClass(n,"active"),classie.addClass(w,"pos4"),classie.removeClass(v,"hide")):k.click()}),o.addEventListener("click",function(){classie.hasClass(s,"hide")?(i.hideAllSections(),classie.toggleClass(s,"hide"),i.resetMenuItemActive(),classie.addClass(o,"active"),classie.addClass(w,"pos5"),classie.removeClass(v,"hide")):k.click()}),p.addEventListener("click",function(){classie.toggleClass(t,"show"),classie.toggleClass(p,"active"),k.click()});var B=document.getElementById("trigger-overlay"),C=document.getElementById("aboutBurguerItem"),D=document.getElementById("galleryBurguerItem"),E=document.getElementById("contactBurguerItem"),F=document.getElementById("creditsBurguerItem"),G=document.getElementById("burguerTitle"),H=document.getElementById("thumbOverlay"),I=document.querySelector(".burguer-overlay");B.addEventListener("click",b),C.addEventListener("click",function(){b(),i.hideAllSections(),classie.toggleClass(q,"hide"),classie.addClass(l,"active"),classie.addClass(w,"pos2"),classie.removeClass(t,"show"),classie.addClass(v,"hide"),a("::about")}),D.addEventListener("click",function(){b(),i.hideAllSections(),classie.addClass(v,"hide"),classie.toggleClass(u,"show"),classie.addClass(m,"active"),classie.addClass(w,"pos3"),classie.removeClass(t,"show"),a("::gallery")}),E.addEventListener("click",function(){b(),i.hideAllSections(),classie.toggleClass(r,"hide"),classie.addClass(n,"active"),classie.addClass(w,"pos4"),classie.removeClass(t,"show"),classie.addClass(v,"hide"),a("::contact")}),F.addEventListener("click",function(){b(),i.hideAllSections(),classie.toggleClass(s,"hide"),classie.addClass(o,"active"),classie.addClass(w,"pos5"),classie.removeClass(t,"show"),classie.addClass(v,"hide"),a("::credits")});var J=document.getElementById("galleryContainer"),K=document.querySelectorAll(".gallery-thumb"),L=new Dragend(J,{pageClass:"gallery-item",duration:500,direction:"horizontal",afterInitialize:function(){J.style.visibility="visible"},onDrag:function(){},onDragEnd:function(){},onSwipeStart:function(){var a=this.activeElement.getElementsByClassName("gallery-content")[0];classie.addClass(a,"hide")},onSwipeEnd:function(){var b=parseInt(this.page),d=K[b],e=this.activeElement.getElementsByClassName("gallery-content")[0];myPortfolio.System.isTouch&&a('::<span class="highlight">Frame</span>'+parseInt(b+1)),classie.removeClass(e,"hide"),[].forEach.call(K,function(a){classie.removeClass(a,"active")}),classie.addClass(d,"active"),c(parseInt(b)+1)}});[].forEach.call(K,function(a){a.addEventListener("click",function(){var b=document.getElementsByClassName("gallery-content");[].forEach.call(b,function(a){classie.addClass(a,"hide")});var d=parseInt(a.getAttribute("data-model"))-1;Math.abs(i.selectedModel-d)>3?L._jumpToPage("page",d):L._scrollToPage("page",d),i.selectedModel=d;var e=document.getElementsByClassName("gallery-content")[d];classie.removeClass(e,"hide"),[].forEach.call(K,function(a){classie.removeClass(a,"active")}),classie.addClass(a,"active"),c(parseInt(d)+1)})}),J.addEventListener?(J.addEventListener("mousewheel",d,!1),J.addEventListener("DOMMouseScroll",d,!1)):J.attachEvent("onmousewheel",d);var M=document.querySelectorAll("picture.model-background-img");this.changeBackgroundVideo=function(a){window.innerWidth<500?Modernizr.video&&Modernizr.video.h264?A.setAttribute("src","../src/videos/scene"+a+"xMobile.mp4"):Modernizr.video&&Modernizr.video.webm&&A.setAttribute("src","../src/videos/scene"+a+"xMobile.webm"):Modernizr.video&&Modernizr.video.h264?A.setAttribute("src","../src/videos/scene"+a+"xSD.mp4"):Modernizr.video&&Modernizr.video.webm&&A.setAttribute("src","../src/videos/scene"+a+"xSD.webm"),A.load()};var N=document.querySelectorAll(".load-webgl");[].forEach.call(N,function(a){classie.removeClass(threejsCanvas,"hide"),a.addEventListener("click",function(){var b=parseInt(a.getAttribute("data-model")),c=parseInt(a.getAttribute("data-assets"));e(b,c)})});var O=document.querySelectorAll(".load-video");[].forEach.call(O,function(a){a.addEventListener("click",function(){var b=parseInt(a.getAttribute("data-model"));f(b)})});var P=document.getElementById("zoomBar");P.addEventListener("mouseup",function(){g(parseInt(this.value))}),document.body.onkeypress=h},initSettings:function(){function a(a){(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)&&(a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen())}function b(){(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen())}var c=document.getElementById("settingsAudioOn"),d=document.getElementById("settingsAudioOff"),e=document.getElementById("settingsFullscreenOn"),f=document.getElementById("settingsFullscreenOff"),g=document.getElementById("settingsStereoscopicOn"),h=document.getElementById("settingsStereoscopicOff"),i=document.getElementById("settingsQualityHigh"),j=document.getElementById("settingsQualityMedium"),k=document.getElementById("settingsQualityLow"),l=document.getElementById("settingsQualityLowShortcut"),m=document.getElementById("audioIcon"),n=document.getElementById("noWebglLaunch");myPortfolio.System.useWebGL()&&(n.addEventListener("click",function(){window.location.href="?nowebgl"}),m.addEventListener("click",function(){classie.hasClass(m,"fa-volume-up")?d.click():c.click()}),c.addEventListener("click",function(){if(!classie.hasClass(c,"active")){myPortfolio.SoundFx.backgroundMusic.play();var a=new TWEEN.Tween(myPortfolio.SoundFx.backgroundMusic).to({volume:1},500);a.easing(TWEEN.Easing.Quadratic.Out).start(),classie.toggleClass(c,"active"),classie.toggleClass(d,"active"),classie.toggleClass(m,"fa-volume-off"),classie.toggleClass(m,"fa-volume-up")}}),d.addEventListener("click",function(){if(!classie.hasClass(d,"active")){var a=new TWEEN.Tween(myPortfolio.SoundFx.backgroundMusic).to({volume:0},500);a.easing(TWEEN.Easing.Quadratic.Out).start(),setTimeout(function(){myPortfolio.SoundFx.backgroundMusic.pause()},600),classie.toggleClass(c,"active"),classie.toggleClass(d,"active"),classie.toggleClass(m,"fa-volume-off"),classie.toggleClass(m,"fa-volume-up")}}),e.addEventListener("click",function(){classie.hasClass(e,"active")||document.fullscreenElement&&document.webkitFullscreenElement&&document.mozFullScreenElement&&document.msFullscreenElement||a(document.documentElement)}),f.addEventListener("click",function(){classie.hasClass(f,"active")||(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)&&b()}),g.addEventListener("click",function(){classie.hasClass(g,"active")||(classie.toggleClass(g,"active"),classie.toggleClass(h,"active"),myPortfolio.World.renderParams.enableAnaglyph=!0,myPortfolio.World.refreshPostProcessing())}),h.addEventListener("click",function(){classie.hasClass(h,"active")||(classie.toggleClass(g,"active"),classie.toggleClass(h,"active"),myPortfolio.World.renderParams.enableAnaglyph=!1,myPortfolio.World.refreshPostProcessing())}),i.addEventListener("click",function(){classie.hasClass(i,"active")||(classie.toggleClass(i,"active"),classie.removeClass(j,"active"),classie.removeClass(k,"active"),myPortfolio.World.renderParams.enableFXAA=!0,myPortfolio.World.renderParams.filmStrengh=.15,myPortfolio.World.renderParams.enableFilm=!1,myPortfolio.World.renderParams.tiltBlur=2.5,myPortfolio.World.renderParams.enableTiltShift=!0,myPortfolio.World.renderParams.rgbValue=5e-4,myPortfolio.World.renderParams.enableRGBShift=!0,myPortfolio.World.renderParams.enableVignette=!0,myPortfolio.World.renderParams.bleach=!0,myPortfolio.World.renderParams.enableColorify=!0,myPortfolio.World.refreshPostProcessing())}),j.addEventListener("click",function(){classie.hasClass(j,"active")||(classie.removeClass(i,"active"),classie.toggleClass(j,"active"),classie.removeClass(k,"active"),myPortfolio.World.renderParams.enableFXAA=!1,myPortfolio.World.renderParams.enableFilm=!1,myPortfolio.World.renderParams.filmStrengh=.2,myPortfolio.World.renderParams.enableTiltShift=!1,myPortfolio.World.renderParams.rgbValue=5e-4,myPortfolio.World.renderParams.enableRGBShift=!1,myPortfolio.World.renderParams.enableColorify=!0,myPortfolio.World.renderParams.enableVignette=!0,myPortfolio.World.renderParams.bleach=!0,myPortfolio.World.refreshPostProcessing())}),k.addEventListener("click",function(){classie.hasClass(k,"active")||(classie.removeClass(i,"active"),classie.removeClass(j,"active"),classie.toggleClass(k,"active"),myPortfolio.World.renderParams.enableFXAA=!1,myPortfolio.World.renderParams.enableFilm=!1,myPortfolio.World.renderParams.filmStrengh=.2,myPortfolio.World.renderParams.enableTiltShift=!1,myPortfolio.World.renderParams.rgbValue=5e-4,myPortfolio.World.renderParams.enableRGBShift=!1,myPortfolio.World.renderParams.enableVignette=!1,myPortfolio.World.renderParams.enableColorify=!1,myPortfolio.World.renderParams.bleach=!1,myPortfolio.World.refreshPostProcessing())
}),l.addEventListener("click",function(){classie.hasClass(k,"active")||(classie.removeClass(i,"active"),classie.removeClass(j,"active"),classie.toggleClass(k,"active"),myPortfolio.World.renderParams.enableFXAA=!1,myPortfolio.World.renderParams.enableFilm=!1,myPortfolio.World.renderParams.filmStrengh=.2,myPortfolio.World.renderParams.enableTiltShift=!1,myPortfolio.World.renderParams.rgbValue=5e-4,myPortfolio.World.renderParams.enableRGBShift=!1,myPortfolio.World.renderParams.enableVignette=!1,myPortfolio.World.renderParams.enableColorify=!1,myPortfolio.World.renderParams.bleach=!1,myPortfolio.World.refreshPostProcessing())}))},initMap:function(){},start:function(){this.initUI(),this.initSettings()}},this.SoundFx={backgroundAudioFile:"../src/audio/IAO.mp3",init:function(){this.backgroundMusic=new Audio,this.backgroundMusic.preload="auto",this.backgroundMusic.addEventListener("error",function(){console.error("error loading audio")},!1),this.backgroundMusic.type="audio/mpeg",this.backgroundMusic.src=this.backgroundAudioFile,this.backgroundMusic.loop=!0}},this.init=function(){if(this.System.init(),this.System.useWebGL()){var a=document.querySelectorAll(".load-video");[].forEach.call(a,function(a){a.style.display="none"}),this.SoundFx.init(),this.World.start(),this.UI.start()}else{this.UI.videoBackground=document.getElementById("videoBackground"),this.UI.start(),this.UI.videoBackground.preload=!0,this.UI.videoBackground.loop=!0,this.UI.videoBackground.muted=!0;var b=document.getElementById("threejsCanvas");b&&b.parentNode.removeChild(b);var c=document.getElementById("modelSettings");c&&c.parentNode.removeChild(c);var d=document.getElementById("sectionSettings");d&&d.parentNode.removeChild(d);var e=document.getElementById("dragModelInfo");e&&e.parentNode.removeChild(e);var f=document.getElementById("currentModelInfo");f.parentNode.removeChild(f);var g=document.getElementById("settingsAnchor");g.style.display="none";var h=document.querySelectorAll(".load-webgl");[].forEach.call(h,function(a){a.style.display="none"});var i=document.querySelectorAll(".model-background-img.hide")[0];classie.removeClass(i,"hide"),classie.removeClass(this.UI.videoBackground,"hide");var j=document.getElementById("burguerMenu"),k=document.getElementById("menu"),l=document.getElementById("footerInfoSection"),m=document.getElementById("initLoadingScreen"),n=document.getElementById("initIntroScreen"),o=document.getElementById("loadingInfoTop"),p=document.getElementById("footerTitle"),q=document.getElementById("shareSection");p.style.display="none",q.style.width="180px",n.parentNode.removeChild(n),o.parentNode.removeChild(o),setTimeout(function(){classie.addClass(m,"hide")},1e3),setTimeout(function(){m.parentNode.removeChild(m),classie.removeClass(j,"hide"),classie.removeClass(k,"hide"),classie.removeClass(l,"hide")},2500)}}},useWebgl=-1===location.search.indexOf("nowebgl");myPortfolio=new API(useWebgl),myPortfolio.init(),console.log("UseWebGL:"+useWebgl),console.log("API started.");